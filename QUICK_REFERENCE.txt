╔══════════════════════════════════════════════════════════════════════════════╗
║                 FINANCIAL RAG FASTAPI - QUICK REFERENCE CARD                  ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌─ STARTUP ─────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  Quick Start:                                                                   │
│    1. Double-click: START_SERVER.bat                                           │
│    2. Or run: python serve.py                                                   │
│    3. Open: http://192.168.1.98:8000/dashboard                                 │
│                                                                                 │
│  Advanced:                                                                      │
│    uvicorn app.core.server:app --host 127.0.0.1 --port 8000                   │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ ENDPOINTS ───────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  Dashboard:       http://192.168.1.98:8000/dashboard                          │
│  Health Check:    curl http://127.0.0.1:8000/health                           │
│  S&P 500 Summary: curl http://127.0.0.1:8000/api/sp500/summary                │
│  Insights:        curl http://127.0.0.1:8000/api/insights/summary             │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ TROUBLESHOOTING ─────────────────────────────────────────────────────────────┐
│                                                                                 │
│  Issue: "Address already in use"                                               │
│    → tasklist | findstr python                                                │
│    → taskkill /PID <pid> /F                                                   │
│    → Try again                                                                 │
│                                                                                 │
│  Issue: Multiple processes on port 8000                                         │
│    → CHECK_PORT_8000.bat  (diagnostic)                                         │
│    → taskkill /IM python.exe /F  (kill all)                                   │
│    → START_SERVER.bat  (fresh start)                                           │
│                                                                                 │
│  Issue: Port check fails or firewall error                                      │
│    → Check Windows Defender: Settings > Firewall > Allow Python               │
│                                                                                 │
│  Issue: "Cannot import app"                                                    │
│    → cd "c:\Users\ramre\OneDrive\Desktop\project LangChain"                   │
│    → python serve.py  (must be in project root)                               │
│                                                                                 │
│  Issue: Packages missing                                                        │
│    → pip install -r requirements.txt                                           │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ DIAGNOSTICS ─────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  Verify Setup:                                                                  │
│    python verify_setup.py                                                      │
│    (Shows Python, packages, port, project, env, Ollama)                        │
│                                                                                 │
│  Check Port Usage:                                                              │
│    netstat -ano | findstr :8000                                                │
│    (Should show exactly ONE line)                                              │
│                                                                                 │
│  Check Process ID:                                                              │
│    tasklist /FI "PID eq <pid>"                                                │
│    (Should show single python.exe entry)                                       │
│                                                                                 │
│  View Server Logs:                                                              │
│    Look at terminal output or server.log                                        │
│    (Should show "[STARTUP] Process ID: XXXXX")                                │
│                                                                                 │
│  Test API:                                                                      │
│    curl http://127.0.0.1:8000/health                                          │
│    curl http://127.0.0.1:8000/api/sp500/summary                               │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ CONFIGURATION ───────────────────────────────────────────────────────────────┐
│                                                                                 │
│  Edit .env file to configure:                                                  │
│    OLLAMA_ENABLED=true          (Local LLM, no API key)                       │
│    OLLAMA_MODEL=mistral         (Default model)                               │
│    LLM_TEMPERATURE=0.7          (Response randomness)                         │
│    VECTOR_DB_DIR=./data/vectorstore  (Data storage)                           │
│                                                                                 │
│  If using PostgreSQL:                                                           │
│    DATABASE_URL=postgresql://user:pass@host:port/db                           │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ DOCUMENTATION ───────────────────────────────────────────────────────────────┐
│                                                                                 │
│  WINDOWS_STARTUP_GUIDE.md         ← Read this first                           │
│  UVICORN_FIX_SUMMARY.md           ← Understand the Windows fix                │
│  FIX_COMPLETE.txt                 ← Summary of all changes                    │
│  verify_setup.py                  ← Health check script                       │
│  CHECK_PORT_8000.bat              ← Diagnostic for port issues               │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ FILES CHANGED ───────────────────────────────────────────────────────────────┐
│                                                                                 │
│  Modified:                        │  New:                                     │
│  ├─ serve.py (fixed)             │  ├─ START_SERVER.bat                     │
│  └─ app/core/server.py (logging) │  ├─ WINDOWS_STARTUP_GUIDE.md             │
│                                   │  ├─ UVICORN_FIX_SUMMARY.md              │
│                                   │  ├─ verify_setup.py                     │
│                                   │  ├─ CHECK_PORT_8000.bat                 │
│                                   │  ├─ FIX_COMPLETE.txt                    │
│                                   │  └─ QUICK_REFERENCE.txt (this file)    │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ KEY FIX: WINDOWS MULTIPLE PROCESS ISSUE ────────────────────────────────────┐
│                                                                                 │
│  What was wrong:                                                                │
│    serve.py used uvicorn.run() which spawned 4+ processes on Windows          │
│    All 4 tried to bind to port 8000 → crashes and conflicts                   │
│                                                                                 │
│  What was fixed:                                                                │
│    serve.py now uses subprocess.run() with CLI uvicorn                         │
│    Plus: port check + PID logging + safety guards                             │
│    Result: Exactly 1 process on port 8000 ✓                                    │
│                                                                                 │
│  How to verify:                                                                 │
│    netstat -ano | findstr :8000                                                │
│    Should show ONE line with ONE PID                                           │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ EMERGENCY COMMANDS ──────────────────────────────────────────────────────────┐
│                                                                                 │
│  Kill all Python:                                                               │
│    taskkill /IM python.exe /F                                                  │
│                                                                                 │
│  Wait 5 seconds:                                                                │
│    timeout /t 5                                                                │
│                                                                                 │
│  Verify port is free:                                                           │
│    netstat -ano | findstr :8000                                                │
│    (Should show nothing)                                                       │
│                                                                                 │
│  Start fresh:                                                                   │
│    START_SERVER.bat                                                            │
│    or: python serve.py                                                         │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

╔══════════════════════════════════════════════════════════════════════════════╗
║  For detailed guidance, see: WINDOWS_STARTUP_GUIDE.md                        ║
║  To understand the fix, see: UVICORN_FIX_SUMMARY.md                          ║
╚══════════════════════════════════════════════════════════════════════════════╝
